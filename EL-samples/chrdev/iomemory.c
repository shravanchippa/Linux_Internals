/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                                      *
* ModuleName         :  iomemory.o                                     *
* SourceName         :  iomemory.c                                     *
*                                                                      *
* Description        : Accessing Physical Memory                       *
*                                                                      *
* Programmer         :---------                                        *
* Date               : 27/4/2006                                       *
*                                                                      *
*----------------------------------------------------------------------*
* Notes:                                                               *
*                                                                      *
*                                                                      *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
 
/*----------------------------------------------------------------------
 ************************** Include File *******************************
 *----------------------------------------------------------------------*/
#include <linux/module.h>
#include <asm/io.h>

char *ptr;		/* virtual address for video buffer */

/*---------------------------------------------------------------------
 ************************** INIT MODULE *******************************
 *--------------------------------------------------------------------*/

int iomemory_init (void)
{
    int i;
    
    printk ("---------Hello----------\n");
   
    ptr = ioremap(0xB8000,4000);
  
    for ( i=0 ; i<3999; i = i+2 )
         writeb('A', (ptr+i));     
 
     return 0;
}

/*---------------------------------------------------------------------
 ************************** CLEANUP MODULE ****************************
 *--------------------------------------------------------------------*/

void iomemory_exit (void)
{
    iounmap(ptr);
    printk ("---------BYE----------\n");
}

module_init(iomemory_init);
module_exit(iomemory_exit);

MODULE_LICENSE("GPL");

